## STEP1. デプロイ情報
以下の情報を入力してください。
- チャットボットをデプロイしたサーバーのURL
  - https://chatty-sprint.herokuapp.com/
- デプロイに使ったサービス: 
  - Heroku

## STEP2. 必須機能の実装

#### helpコマンド
`bot help` 参照

#### `bot ping`
このコマンドについては自分がサーバーに接続しているかを確認するコマンドなのでタイムラインを
荒らさないためにも、リプライは自分のみに返ってくる。また、Botからのリプライとわかるように
デザインを与えている。

`bot help ping` 参照

#### `bot todo`系
データはMongoDBに追加しています。

- `bot todo add [todo名] [todo内容]`
  -  todoリストにtodoを追加します。
- `bot todo delete [todo名]`
  - todo名のtodoがあったら、その一件を消去します。
  - 隠しコマンド `bot todo delete all`
    - 全てのtodoを消去します。
- `bot todo list`
  - todoリストの一覧を返します

`bot help todo` 参照


## STEP3. 独自コマンドの実装
追加した独自コマンド一覧


#### `bot dice [max]`
maxのデフォルト値は 6 です。
maxが入力されている場合は (1 ~ max) の間の整数をランダムに返します。

`bot help dice` 参照

例).
```
bot dice 10
# => 8 
```

#### `bot map [location]`
google mapの静的画像を返します。

例).
```
bot map 名古屋大学
bot map 150-0034
```

#### `bot news [type]`
世界中のニュース提供元から集約した広範囲にわたる最新情報を3件返します。 (google newsの受け売り)
typeには以下の種類があります。
- y = 社会
- w = 国際
- b = ビジネス
- p = 政治
- e = エンタメ
- s = スポーツ
- t = テクノロジー
- po = 話題

`bot help news` 参照


#### `bot set []=[]`
ボットネームや自分のネームカラーを変更します。

- `bot set botname=pokohide`
  - ボットネームをpokohideに変更します。
- `bot set color=#123456` or `bot set color=red``
  - 自分のネームカラーを指定した色に変更します。

`bot help set` 参照


#### `bot status`
Chatty(bot)はbotコマンドでない普通のメッセージを非同期で形態素解析して学習しています。
そうして学習したマルコフモデルを5分に一回Mongodbにバックアップを取っています。
この`status`コマンドはChatty(bot)のバイト数と語彙数を返します。

また、Chatty(bot)と会話するには以下のコマンドで会話できます。
`bot talk [会話文]`


#### `bot talk [会話文]`
Chatty(bot)は普通のメッセージを学習しています。そのChattyと会話をするコマンド。
返答文の生成方法は[会話文]の中にある名詞からマルコフ連鎖によって確率的に文を生成しています。
その返答文を返します。


#### `bot timer [秒数]`
秒数のデフォルト値は60秒です。
ユーザ全てのタイムラインに設定して秒数のタイマーを設置します。タイマーは時間が訪れると
ユーザにフラッシュメッセージでタイマーの終了を告げ、消えます。

また、タイマーにランダムな文字列を付与して、複数タイマーを同時に使用できるように工夫しています。


#### `bot youtube [link]`
ユーザ全てのタイムラインにYoutubeの動画を埋め込みます。

例).
```
bot youtube https://www.youtube.com/watch?v=QcIy9NiNbmo
```



## 今回の開発に使用した技術
#### サーバーサイド
- Node.js

#### フロントエンド
- HTML
- CSS
- jQuery
- markdown

#### フレームワーク
- koa

#### DB
- mongoDB

#### API
- google static map API
- youtube iframe API
- google news API
- Yahoo 日本語形態素解析API


## その他独自実装した内容の説明

#### botからのリプライ方法
Botからのリプライに3種類のリプライ方法を用意した。
- 全てのユーザーにBotからリプライ
  - bot map, bot timerなど何かをアシストするbotコマンドのリプライは全てこの方式でリプライしている。
- 自分以外の全てのユーザーにBotからリプライ
  - ユーザが離脱した時などは、自分には「離脱しました」のサクセスメッセージだが、他のユーザには「離脱しました」とワーニングメッセージで流している。
- 自分のみにBotからリプライ
  - `bot ping`などサーバーと繋がっているかを確認するなどタイムラインに流すほどでもないものはこのリプライ方式

#### 2種類の通知方法
チャット入力欄の左側にあるアイコンをクリックすることで通知方法を変更できます。
通知方法のデフォルト値は自動スクロールです。
- 自動スクロール
  - 新しいメッセージが来るたびに自動でそのメッセージまで自動でスクロールします。
- 新しい通知と出るのみ
  - 新しいメッセージが来ても、自動でそこまでスクロールはせず、『新しい通知』と表示されて、通知をユーザに伝えます。

#### マークダウン
Chattyはマークダウン記法でチャットを自動変換して送信しています。

#### botコマンドのalias
ボットネーム(デフォルトではChatty)はbotコマンドのaliasでもあります。なので、

```
bot help
chatty help
```

は同じ結果を表示します。ボットネームを変更したらそれでbotコマンドを叩けます。

```
chatty help                 // bot helpと同じ
bot set botname=pokohide    // botnameをpokohideに変更
pokohide help               // bot helpと同じ 
```

#### メッセージの種類
Chattyではユーザへのメッセージの種類として以下の3種類を設けている。
- 通常のメッセージ
  - 普通のチャットやボットからのリプライはこの形式で表示されます。
- ルームメッセージ
  - 現在のチャットルームの人数など必要性のないがルームに関する情報を表示します。
- フラッシュメッセージ
  - ユーザ参加の通知や、タイマーの終了の通知など必要性のある情報を表示します。


#### ネームカラー
ユーザはルーム参加時にランダムでネームカラーを与えられます。視覚的に自分と他のユーザ
を区別できます。
また、`bot set color=red`で自分のネームカラーを変更できます。


#### 独自の人工無能
Chattyはbotコマンドでユーザのアシストをするだけではなく、ユーザの会話をもとに学習します。
ユーザの会話を非同期で形態素解析して自分の語彙を増やしています。その結果のボキャブラリーや
バイト数を`bot status`コマンドで確認できます。

また、`bot talk [会話]`でChattyと会話できます。返答文は[会話]の中にある名詞をスタートに
マルコフ連鎖で確率的に生成された文を返します。


## その他創意工夫点、アピールポイントなど
Chattyはあくまでアシストボットです。なので、ユーザ同士の普通の会話を楽しんでもらうために普通の
会話の邪魔をしません。しかし、botコマンドで会話の補助をすることができます。
